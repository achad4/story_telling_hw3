<html>
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript">
      

      var histogram_data;
      $.ajax({
        url: 'http://127.0.0.1:5000/histogram',
        async: false, 
        success: function(data) {
          histogram_data = data;
          console.log(histogram_data);
        },
        error: function() {
           console.log("error");
        }
      });
      console.log("yooo");
      var chart_data = [['Station', 'Rentals']];
      console.log(histogram_data);
      for(key in histogram_data){
        
        if(!histogram_data.hasOwnProperty){
          continue;
        }
        var n = parseFloat(histogram_data[key]);
        console.log(n);
        var temp_array = [key, n];
        chart_data.push(temp_array);
      }

      console.log(chart_data);


      google.charts.load("current", {packages:["corechart"]});
      google.charts.setOnLoadCallback(drawChart);
      
      

      //source: https://developers.google.com/chart/interactive/docs/gallery/histogram
      function drawChart() {
        var data = google.visualization.arrayToDataTable(chart_data);

        var options = {
          title: 'City Bike Rentals by Station',
          legend: { position: 'none' },
          histogram: { bucketSize: 1 }
        };

        var chart = new google.visualization.Histogram(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html>